---
layout: post
title: HTTP持久连接
tags:
- HTTP
categories: HTTP
description: HTTP持久连接
---

# HTTP持久连接

## 什么是持久连接

HTTP协议采用“请求 - 应答”模式，当使用普通模式，即非Keep-Alive模式时，每个请求/应答客户和服务器都要新建一个连接，完成之后立即断开连接（HTTP协议为无连接的协议）

当使用Keep - Alive模式（又称为持久连接、连接重用）时，Keep - Alive功能使客户端到服务器端的连接持续有效，当出现对服务器的后记请求时，Keep - Alive功能避免了建立或者重新建立连接

持久连接是HTTP/1.1才出现的

### 什么是管线化

在使用持久连接的情况下，某个连接上消息的传递类似于

请求1 -> 响应1 -> 请求12 -> 响应2 -> 请求3 -> 响应3

某个连接上的消息变成了类似这样

请求1 -> 请求2 -> 请求3 -> 响应1  -> 响应2 -> 响应3

- 管线化机制通过持久连接完成，仅HTTP/1.1支持此技术  
- 只有GET和HEAD请求可以进行管线化，而POST则有所限制  
- 初次建立连接时不应启动管线机制，因为对方（服务器）不一定支持HTTP/1.1版本的协议  
- 管线化不会影响响应到来的顺序，如上面的例子所示，响应返回的顺序未改变  
- HTTP/1.1要求服务器支持管线化，但并不要求服务器端也对响应进行管线化处理，只是要求对于管线化的请求不失败即可  
- 由于上面提到的服务器端问题，开启管线化很可能并不会带来大幅度的性能提升，而且很多服务器端和代理程序对管线化的支持并不好，因此现代浏览器chrome和Firefox默认并未开启管线化支持  

# 更多-more


